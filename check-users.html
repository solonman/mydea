<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>检查用户数据</title>
  <style>
    body {
      font-family: monospace;
      background: #1a1a1a;
      color: #fff;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    pre {
      background: #2a2a2a;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      border: 1px solid #3a3a3a;
    }
    h2 {
      color: #60A5FA;
    }
    .highlight {
      color: #10B981;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>🔍 用户数据检查</h1>
  
  <h2>localStorage 中的用户数据：</h2>
  <pre id="db-data"></pre>
  
  <h2>当前登录用户：</h2>
  <pre id="session-data"></pre>

  <script>
    const DB_KEY = 'mydea_db';
    const SESSION_KEY = 'mydea_session';

    // 显示数据库数据
    const dbString = localStorage.getItem(DB_KEY);
    const dbData = dbString ? JSON.parse(dbString) : null;
    
    if (dbData) {
      document.getElementById('db-data').textContent = JSON.stringify(dbData, null, 2);
      
      // 高亮显示用户列表
      console.log('=== 所有用户 ===');
      Object.keys(dbData).forEach(username => {
        const user = dbData[username];
        console.log(`用户名: ${username}, 角色: ${user.role || 'user'}, 项目数: ${user.projects?.length || 0}`);
      });
    } else {
      document.getElementById('db-data').textContent = '❌ 无数据';
    }

    // 显示会话数据
    const sessionString = localStorage.getItem(SESSION_KEY);
    const sessionData = sessionString ? JSON.parse(sessionString) : null;
    
    if (sessionData) {
      document.getElementById('session-data').textContent = JSON.stringify(sessionData, null, 2);
    } else {
      document.getElementById('session-data').textContent = '❌ 未登录';
    }
  </script>
</body>
</html>
