# Supabase é…ç½®æŒ‡å—

æœ¬æŒ‡å—å¸®åŠ©ä½ å®Œæˆ Supabase æ•°æ®åº“çš„é…ç½®ï¼Œå®ç°æ•°æ®æŒä¹…åŒ–å­˜å‚¨ã€‚

---

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. æ³¨å†Œ Supabase è´¦å·

1. è®¿é—® [Supabase å®˜ç½‘](https://supabase.com/)
2. ç‚¹å‡» "Start your project" æˆ– "Sign Up"
3. ä½¿ç”¨ GitHub è´¦å·æˆ–é‚®ç®±æ³¨å†Œ
4. éªŒè¯é‚®ç®±ï¼ˆå¦‚æœä½¿ç”¨é‚®ç®±æ³¨å†Œï¼‰

---

## ğŸš€ åˆ›å»º Supabase é¡¹ç›®

### æ­¥éª¤ 1: æ–°å»ºé¡¹ç›®

1. ç™»å½•åï¼Œç‚¹å‡» "New Project"
2. é€‰æ‹©ç»„ç»‡ï¼ˆOrganizationï¼‰æˆ–åˆ›å»ºæ–°ç»„ç»‡
3. å¡«å†™é¡¹ç›®ä¿¡æ¯ï¼š
   - **Name**: `mydea-db`ï¼ˆæˆ–å…¶ä»–åç§°ï¼‰
   - **Database Password**: è®¾ç½®ä¸€ä¸ªå¼ºå¯†ç ï¼ˆ**åŠ¡å¿…ä¿å­˜**ï¼‰
   - **Region**: é€‰æ‹© `Northeast Asia (Tokyo)` æˆ–ç¦»ä½ æœ€è¿‘çš„åŒºåŸŸ
   - **Pricing Plan**: é€‰æ‹© `Free` å…è´¹ç‰ˆ

4. ç‚¹å‡» "Create new project"
5. ç­‰å¾… 1-2 åˆ†é’Ÿï¼Œé¡¹ç›®åˆ›å»ºå®Œæˆ

---

### æ­¥éª¤ 2: è·å– API å¯†é’¥

é¡¹ç›®åˆ›å»ºå®Œæˆåï¼š

1. åœ¨å·¦ä¾§èœå•ç‚¹å‡» **Settings** (é½¿è½®å›¾æ ‡)
2. é€‰æ‹© **API**
3. æ‰¾åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

```
Project URL: https://your-project-id.supabase.co
anon public key: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**é‡è¦**: 
- âœ… `anon public` key å¯ä»¥åœ¨å‰ç«¯ä½¿ç”¨ï¼ˆå®‰å…¨ï¼‰
- âŒ `service_role` key **ä¸è¦**åœ¨å‰ç«¯ä½¿ç”¨ï¼ˆæ•æ„Ÿï¼‰

---

## ğŸ—„ï¸ åˆ›å»ºæ•°æ®åº“è¡¨

### æ­¥éª¤ 3: è¿è¡Œ SQL Schema

1. åœ¨å·¦ä¾§èœå•ç‚¹å‡» **SQL Editor**
2. ç‚¹å‡» **New Query**
3. å¤åˆ¶ `database/schema.sql` æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹
4. ç²˜è´´åˆ° SQL ç¼–è¾‘å™¨
5. ç‚¹å‡»å³ä¸‹è§’çš„ **Run** æŒ‰é’®ï¼ˆæˆ–æŒ‰ `Ctrl/Cmd + Enter`ï¼‰

**é¢„æœŸç»“æœ**:
```
Success. No rows returned
```

---

### æ­¥éª¤ 4: éªŒè¯è¡¨åˆ›å»º

1. åœ¨å·¦ä¾§èœå•ç‚¹å‡» **Table Editor**
2. åº”è¯¥çœ‹åˆ°ä¸‰ä¸ªè¡¨ï¼š
   - âœ… `users` - ç”¨æˆ·è¡¨
   - âœ… `projects` - é¡¹ç›®è¡¨
   - âœ… `briefs` - åˆ›æ„ä»»åŠ¡è¡¨

3. ç‚¹å‡»æ¯ä¸ªè¡¨ï¼ŒæŸ¥çœ‹åˆ—ç»“æ„

---

## âš™ï¸ é…ç½®åº”ç”¨ç¯å¢ƒå˜é‡

### æ­¥éª¤ 5: æ›´æ–° `.env.local`

æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•çš„ `.env.local` æ–‡ä»¶ï¼Œæ·»åŠ  Supabase é…ç½®ï¼š

```env
# Gemini API Key (å·²æœ‰)
GEMINI_API_KEY=your_existing_gemini_key_here

# Supabase é…ç½® (æ–°å¢)
VITE_SUPABASE_URL=https://your-project-id.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

**æ³¨æ„**:
- æ›¿æ¢ `your-project-id` ä¸ºä½ çš„å®é™…é¡¹ç›® ID
- æ›¿æ¢ `eyJ...` ä¸ºä½ çš„å®é™… anon key
- ä½¿ç”¨ `VITE_` å‰ç¼€æ˜¯ Vite çš„è¦æ±‚

---

### æ­¥éª¤ 6: é‡å¯å¼€å‘æœåŠ¡å™¨

é…ç½®å®Œæˆåï¼Œé‡å¯å¼€å‘æœåŠ¡å™¨ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆï¼š

```bash
# åœ¨ç»ˆç«¯ä¸­æŒ‰ Ctrl+C åœæ­¢å½“å‰æœåŠ¡å™¨
# ç„¶åé‡æ–°å¯åŠ¨
npm run dev
```

---

## âœ… æµ‹è¯•æ•°æ®åº“è¿æ¥

### æ­¥éª¤ 7: æµ‹è¯•è¿æ¥

å¼€å‘æœåŠ¡å™¨å¯åŠ¨åï¼š

1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
2. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
3. åº”è¯¥çœ‹åˆ°ï¼š
   ```
   [INFO] Supabase client initialized { url: "https://..." }
   ```

å¦‚æœçœ‹åˆ°è¿™æ¡æ—¥å¿—ï¼Œè¯´æ˜è¿æ¥æˆåŠŸï¼ ğŸ‰

---

## ğŸ” éªŒè¯æ•°æ®åº“åŠŸèƒ½

### æ‰‹åŠ¨æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

åœ¨ Supabase SQL Editor ä¸­è¿è¡Œä»¥ä¸‹æµ‹è¯•ï¼š

```sql
-- 1. åˆ›å»ºæµ‹è¯•ç”¨æˆ·
INSERT INTO users (username, email) 
VALUES ('testuser', 'test@example.com')
RETURNING *;

-- 2. æŸ¥è¯¢ç”¨æˆ·
SELECT * FROM users WHERE username = 'testuser';

-- 3. åˆ›å»ºæµ‹è¯•é¡¹ç›®
INSERT INTO projects (user_id, name, description)
VALUES (
  (SELECT id FROM users WHERE username = 'testuser'),
  'æµ‹è¯•é¡¹ç›®',
  'è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡¹ç›®'
)
RETURNING *;

-- 4. æŸ¥è¯¢é¡¹ç›®
SELECT p.*, u.username 
FROM projects p
JOIN users u ON p.user_id = u.id
WHERE u.username = 'testuser';
```

---

## ğŸ” å®‰å…¨é…ç½®

### Row Level Security (RLS)

æˆ‘ä»¬çš„ schema å·²ç»å¯ç”¨äº† RLSï¼Œç¡®ä¿ï¼š
- âœ… ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- âœ… ä¸èƒ½æŸ¥çœ‹æˆ–ä¿®æ”¹å…¶ä»–ç”¨æˆ·çš„æ•°æ®

### éªŒè¯ RLS ç­–ç•¥

åœ¨ Supabase æ§åˆ¶å°ï¼š

1. ç‚¹å‡» **Authentication** â†’ **Policies**
2. é€‰æ‹©è¡¨ï¼ˆå¦‚ `projects`ï¼‰
3. æŸ¥çœ‹å·²åˆ›å»ºçš„ç­–ç•¥

---

## ğŸ“Š æ•°æ®åº“ç›‘æ§

### æŸ¥çœ‹æ•°æ®

1. **Table Editor**: ç›´è§‚æŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®
2. **SQL Editor**: æ‰§è¡Œå¤æ‚æŸ¥è¯¢
3. **Database** â†’ **Reports**: æŸ¥çœ‹æ•°æ®åº“ç»Ÿè®¡

### æ€§èƒ½ç›‘æ§

1. ç‚¹å‡» **Database** â†’ **Reports**
2. æŸ¥çœ‹ï¼š
   - æŸ¥è¯¢æ€§èƒ½
   - ç´¢å¼•ä½¿ç”¨æƒ…å†µ
   - æ…¢æŸ¥è¯¢æ—¥å¿—

---

## ğŸ”„ æ•°æ®è¿ç§»

### ä» localStorage è¿ç§»åˆ° Supabase

æ•°æ®è¿ç§»å·¥å…·å°†åœ¨ä¸‹ä¸€æ­¥å®ç°ã€‚ç›®å‰å¯ä»¥ï¼š

**é€‰é¡¹ 1: ä¿ç•™ localStorage æ•°æ®**
- åº”ç”¨å°†åŒæ—¶æ”¯æŒ localStorage å’Œ Supabase
- ç°æœ‰æ•°æ®ä¿ç•™åœ¨ localStorage
- æ–°æ•°æ®å­˜å‚¨åˆ° Supabase

**é€‰é¡¹ 2: æ‰‹åŠ¨è¿ç§»**
1. åœ¨åº”ç”¨ä¸­å¯¼å‡º localStorage æ•°æ®
2. ä½¿ç”¨è¿ç§»å·¥å…·å¯¼å…¥åˆ° Supabase

---

## ğŸ’° å…è´¹é¢åº¦è¯´æ˜

Supabase å…è´¹ç‰ˆåŒ…å«ï¼š

| èµ„æº | å…è´¹é¢åº¦ |
|------|---------|
| æ•°æ®åº“ | 500 MB |
| æ–‡ä»¶å­˜å‚¨ | 1 GB |
| å¸¦å®½ | 5 GB/æœˆ |
| API è¯·æ±‚ | æ— é™åˆ¶ |
| è¡Œæ•° | æ— é™åˆ¶ |
| å¹¶å‘è¿æ¥ | 60 ä¸ª |

**è¶³å¤Ÿä¸ªäººé¡¹ç›®ä½¿ç”¨ï¼** âœ…

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¿˜è®°äº†æ•°æ®åº“å¯†ç æ€ä¹ˆåŠï¼Ÿ

**A**: å¯ä»¥é‡ç½®å¯†ç ï¼š
1. Settings â†’ Database
2. ç‚¹å‡» "Reset Database Password"
3. è®¾ç½®æ–°å¯†ç 

### Q2: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

**A**: å…è´¹ç‰ˆä¸æä¾›è‡ªåŠ¨å¤‡ä»½ï¼Œå»ºè®®ï¼š
1. å®šæœŸå¯¼å‡ºæ•°æ®ï¼ˆSQL Editorï¼‰
2. ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ï¼ˆGitï¼‰ç®¡ç† schema
3. å‡çº§åˆ°ä»˜è´¹ç‰ˆè·å¾—è‡ªåŠ¨å¤‡ä»½

### Q3: è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**A**: æ£€æŸ¥ï¼š
1. âœ… URL å’Œ Key æ˜¯å¦æ­£ç¡®
2. âœ… æ˜¯å¦ä½¿ç”¨äº† `VITE_` å‰ç¼€
3. âœ… æ˜¯å¦é‡å¯äº†å¼€å‘æœåŠ¡å™¨
4. âœ… ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

### Q4: RLS ç­–ç•¥å¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Ÿ

**A**: 
1. æ£€æŸ¥æ˜¯å¦ç™»å½•äº†æ­£ç¡®çš„ç”¨æˆ·
2. åœ¨ SQL Editor ä¸­æµ‹è¯•ç­–ç•¥
3. ä¸´æ—¶ç¦ç”¨ RLS æµ‹è¯•ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰

---

## ğŸ“š æ›´å¤šèµ„æº

- [Supabase å®˜æ–¹æ–‡æ¡£](https://supabase.com/docs)
- [JavaScript å®¢æˆ·ç«¯æ–‡æ¡£](https://supabase.com/docs/reference/javascript)
- [SQL æ•™ç¨‹](https://supabase.com/docs/guides/database)
- [Row Level Security](https://supabase.com/docs/guides/auth/row-level-security)

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

å®Œæˆä»¥ä¸‹æ£€æŸ¥ï¼Œç¡®è®¤é…ç½®æ­£ç¡®ï¼š

- [ ] Supabase é¡¹ç›®å·²åˆ›å»º
- [ ] è·å–äº† Project URL
- [ ] è·å–äº† anon public key
- [ ] è¿è¡Œäº† schema.sql
- [ ] çœ‹åˆ°ä¸‰ä¸ªè¡¨ï¼ˆusers, projects, briefsï¼‰
- [ ] æ›´æ–°äº† `.env.local`
- [ ] é‡å¯äº†å¼€å‘æœåŠ¡å™¨
- [ ] æ§åˆ¶å°æ˜¾ç¤º "Supabase client initialized"
- [ ] æµ‹è¯•æŸ¥è¯¢æˆåŠŸ

---

## ğŸ‰ ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼Œè¿›è¡Œä»¥ä¸‹æ“ä½œï¼š

1. âœ… **å®ç°æ•°æ®æœåŠ¡** - åˆ›å»º CRUD æ“ä½œ
2. âœ… **æ›´æ–°åº”ç”¨é€»è¾‘** - é›†æˆ Supabase åˆ°ç»„ä»¶
3. âœ… **æ•°æ®è¿ç§»å·¥å…·** - ä» localStorage è¿ç§»
4. âœ… **æµ‹è¯•éªŒè¯** - å®Œæ•´åŠŸèƒ½æµ‹è¯•

---

**é…ç½®æ—¥æœŸ**: 2025-10-25  
**ç‰ˆæœ¬**: v1.0.0  
**çŠ¶æ€**: å‡†å¤‡å°±ç»ª ğŸš€
